!function(e){function n(n){for(var r,a,u=n[0],c=n[1],l=n[2],f=0,v=[];f<u.length;f++)a=u[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&v.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(s&&s(n);v.length;)v.shift()();return i.push.apply(i,l||[]),t()}function t(){for(var e,n=0;n<i.length;n++){for(var t=i[n],r=!0,u=1;u<t.length;u++){var c=t[u];0!==o[c]&&(r=!1)}r&&(i.splice(n--,1),e=a(a.s=t[0]))}return e}var r={},o={0:0},i=[];function a(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=e,a.c=r,a.d=function(e,n,t){a.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,n){if(1&n&&(e=a(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)a.d(t,r,function(n){return e[n]}.bind(null,r));return t},a.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(n,"a",n),n},a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},a.p="/";var u=window.webpackJsonp=window.webpackJsonp||[],c=u.push.bind(u);u.push=n,u=u.slice();for(var l=0;l<u.length;l++)n(u[l]);var s=c;i.push([153,1]),t()}({153:function(e,n,t){t(154),t(379),t(380),t(381),t(151),t(384),e.exports=t(383)},383:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return v}));t(151),t(382);var r=t(13);t(152);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,n){return(a=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function u(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=l(e);if(n){var o=l(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return c(this,t)}}function c(e,n){return!n||"object"!==o(n)&&"function"!==typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&a(e,n)}(l,e);var n,t,o,c=u(l);function l(){var e;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,l);var n=new r.f(2,2),t=new r.g({uniforms:{time:{type:"f",value:0},interval:{type:"f",value:5},duration:{type:"f",value:5},resolution:{type:"v2",value:new r.j},imageResolution:{type:"v2",value:new r.j(2048,1356)},textures:{type:"f",value:0}},vertexShader:"#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform vec2 resolution;\nuniform vec2 imageResolution;\n\nvarying vec2 vUv;\n\nvoid main(void) {\n  vec2 ratio = vec2(\n    min((resolution.x / resolution.y) / (imageResolution.x / imageResolution.y), 1.0),\n    min((resolution.y / resolution.x) / (imageResolution.y / imageResolution.x), 1.0)\n  );\n\n  vec2 updateUv = vec2(\n    uv.x * ratio.x + (1.0 - ratio.x) * 0.5,\n    uv.y * ratio.y + (1.0 - ratio.y) * 0.5\n  );\n\n  vUv = updateUv;\n  gl_Position = vec4(position, 1.0);\n}",fragmentShader:"#define _PerlinPrecision 8.\n#define _PerlinOctaves 8.\n#define _PerlinSeed 0.\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform float time;\nuniform float interval;\nuniform float duration;\nuniform sampler2D textures[2];\nfloat cubicInOut(float t) {\n  return t < 0.5\n    ? 4.0 * t * t * t\n    : 0.5 * pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\n\nfloat rnd(vec2 xy){\n  return fract(sin(dot(xy,vec2(12.9898-_PerlinSeed,78.233+_PerlinSeed)))*(43758.5453+_PerlinSeed));\n}\nfloat inter(float a,float b,float x){\n  //return a*(1.0-x) + b*x;\n  float f=(1.-cos(x*3.1415927))*.5;\n  return a*(1.-f)+b*f;\n}\nfloat perlin(vec2 uv){\n  float a,b,c,d,coef1,coef2,t,p;\n  t=_PerlinPrecision;// Precision\n  p=0.;// Final heightmap value\n  for(float i=0.;i<_PerlinOctaves;i++)\n  {\n    a=rnd(vec2(floor(t*uv.x)/t,floor(t*uv.y)/t));\n    b=rnd(vec2(ceil(t*uv.x)/t,floor(t*uv.y)/t));\n    c=rnd(vec2(floor(t*uv.x)/t,ceil(t*uv.y)/t));\n    d=rnd(vec2(ceil(t*uv.x)/t,ceil(t*uv.y)/t));\n    if((ceil(t*uv.x)/t)==1.)\n    {\n      b=rnd(vec2(0.,floor(t*uv.y)/t));\n      d=rnd(vec2(0.,ceil(t*uv.y)/t));\n    }\n    coef1=fract(t*uv.x);\n    coef2=fract(t*uv.y);\n    p+=inter(inter(a,b,coef1),inter(c,d,coef1),coef2)*(1./pow(2.,(i+.6)));\n    t*=2.;\n  }\n  return p;\n}\nvec3 getTexColor(float index,vec2 uv){\n  vec4 color;\n  color+=texture2D(textures[0],uv)*(1.-step(.9,index));\n  color+=texture2D(textures[1],uv)*step(1.,index)*(1.-step(1.9,index));\n  return color.rgb;\n}\nvoid main(){\n  vec2 p=vUv.xy-.5;\n  float r=length(p);\n  float seed=floor(.5);\n  float noise_scale=.15+.075*mod(seed,3.);\n  // float num_layers = 3.+2.*mod(seed, 5.);\n  float alpha=cubicInOut(clamp(mod(time,interval)/duration-(interval/duration-1.),0.,1.));\n  float num_layers=10.;\n  seed*=num_layers;\n  \n  float v=0.;\n  \n  for(float i=0.;i<10.;i++){\n    float h=noise_scale*perlin(p+vec2(i+seed))+r;\n    if(h<alpha){v+=1./num_layers;}\n  }\n  float indexPrev=floor(mod(time,interval*2.)/interval);\n  float indexNext=floor(mod(time+interval,interval*2.)/interval);\n  vec3 color1=getTexColor(indexPrev,vUv);\n  vec3 color2=getTexColor(indexNext,vUv);\n  \n  vec3 mixcolor=mix(color1,color2,v);\n  \n  gl_FragColor=vec4(mixcolor,1.);\n}\n"});return(e=c.call(this,n,t)).name="Mesh",e}return n=l,(t=[{key:"start",value:function(e,n){this.resize(e);for(var t=0;t<n.length;t++)n[t].magFilter=r.d,n[t].minFilter=r.d;this.material.uniforms.textures.value=n}},{key:"update",value:function(e){this.material.uniforms.time.value+=e}},{key:"resize",value:function(e){this.material.uniforms.resolution.value.copy(e)}}])&&i(n.prototype,t),o&&i(n,o),l}(r.c);var f=function e(){var n=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.render=function(){var e=n.clock.getDelta();n.picture.update(e),n.renderer.render(n.scene,n.camera)},this.renderLoop=function(){n.render(),requestAnimationFrame((function(){return n.renderLoop()}))},this.resizeCamera=function(){n.camera.setViewOffset(1200,800,(n.resolution.x-1200)/-2,(n.resolution.y-800)/-2,n.resolution.x,n.resolution.y),n.camera.updateProjectionMatrix()},this.resizeWindow=function(){n.resolution.set(window.innerWidth,window.innerHeight),n.resizeCamera(),n.picture.resize(n.resolution),n.renderer.setSize(n.resolution.x,n.resolution.y)},this.on=function(){window.addEventListener("resize",function(e,n){var t;return function(){var r=this,o=arguments;clearTimeout(t),t=setTimeout((function(){return e.apply(r,o)}),n)}}((function(){return n.resizeWindow()}),1e3))},this.resolution=new r.j,this.renderer=new r.l({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement);var t=document.createElement("div");t.classList.add("loading"),t.innerHTML="loading ...",document.body.appendChild(t),this.scene=new r.h,this.camera=new r.e,this.clock=new r.a({autoStart:!1}),this.picture=new s,this.renderer.setClearColor(15658734,1),this.camera.aspect=1.5,this.camera.far=1e3,this.camera.setFocalLength(50),this.camera.position.set(0,0,300),this.camera.lookAt(new r.k),this.on(),this.resizeWindow();var o=[],i=new r.b,a=new r.i(i);a.load("/ex04/pictures/assets/images/pic01.jpg",(function(e){o[0]=e})),a.load("/ex04/pictures/assets/images/pic02.jpg",(function(e){o[1]=e})),i.onLoad=function(){t.style.display="none",n.picture.start(n.resolution,o),n.clock.start(),n.renderLoop()},this.scene.add(this.picture)};var v=function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),new f};window.addEventListener("DOMContentLoaded",(function(){new v}))}});